<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All the Light We Cannot See: Enhanced Digital Tribute</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    }
    body {
      background-color: #121212;
      color: #fff;
      overflow-x: hidden;
      height: 700vh;
    }
    .browser-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      transition: transform 0.8s ease-in-out;
      z-index: 10;
    }
    .browser-header {
      background-color: #2c2c30;
      height: 40px;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      display: flex;
      align-items: center;
      padding: 0 15px;
    }
    .browser-controls {
      display: flex;
      gap: 8px;
    }
    .browser-button {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .browser-button.red {
      background-color: #ff5f57;
    }
    .browser-button.yellow {
      background-color: #febc2e;
    }
    .browser-button.green {
      background-color: #28c840;
    }
    .browser-tabs {
      display: flex;
      margin-left: 20px;
      height: 0;
      overflow: hidden;
      transition: height 0.5s ease;
    }
    .browser-tab {
      background-color: #3c3c3e;
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
      padding: 0 15px;
      height: 32px;
      display: flex;
      align-items: center;
      margin-right: 2px;
      font-size: 12px;
      color: #bbb;
      white-space: nowrap;
      max-width: 160px;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0;
      transform: scale(0.9);
    }
    .browser-tab.active {
      background-color: #1a1a1a;
      color: #fff;
    }
    .browser-address-bar {
      flex: 1;
      background-color: #3c3c3e;
      height: 28px;
      border-radius: 4px;
      margin: 0 10px;
      opacity: 0.7;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      padding: 0 10px;
      color: rgba(255, 255, 255, 0.7);
      font-size: 12px;
    }
    .address-text {
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .browser-navigation {
      display: flex;
      gap: 8px;
      margin-right: 10px;
    }
    .nav-button {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.6;
      font-size: 14px;
      cursor: pointer;
    }
    .browser-content {
      flex: 1;
      background-color: #1a1a1a;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }
    .initial-message {
      font-size: 32px;
      color: #fff;
      text-align: center;
      opacity: 0.8;
      position: absolute;
      transition: opacity 0.5s ease;
    }
    .loading-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, #4285f4, #34a853, #fbbc05, #ea4335);
      width: 0%;
      opacity: 0;
      transition: width 2s ease-in-out, opacity 0.5s ease;
    }
    .popup-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .popup {
      position: absolute;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transform: rotate(var(--rotation, 0deg)) scale(var(--scale, 1));
      transition: all 0.3s ease;
      opacity: 0;
    }
    .popup:hover {
      transform: rotate(var(--rotation, 0deg)) scale(calc(var(--scale, 1) * 1.05));
      z-index: 100;
    }
    .popup-cookie {
      width: 280px;
      height: 180px;
      background-color: #ffd633;
      bottom: 100px;
      right: 80px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .popup-cookie-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #333;
    }
    .popup-cookie-button {
      background-color: #3a3a3a;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 4px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
    }
    .popup-chat {
      width: 280px;
      height: 180px;
      background-color: #fff;
      right: 120px;
      top: 150px;
      border-radius: 12px;
      overflow: hidden;
    }
    .chat-header {
      height: 30px;
      background-color: #f2f2f2;
      border-bottom: 1px solid #e0e0e0;
    }
    .chat-body {
      padding: 10px;
    }
    .chat-bubble {
      background-color: #0095ff;
      color: #fff;
      padding: 8px 12px;
      border-radius: 18px;
      max-width: 80%;
      margin-left: auto;
      margin-bottom: 10px;
    }
    .chat-input {
      background-color: #f2f2f2;
      border-radius: 20px;
      height: 36px;
      margin: 10px;
      display: flex;
      align-items: center;
      padding: 0 15px;
      color: #666;
    }
    .popup-map {
      width: 220px;
      height: 220px;
      background-color: #e6f4ea;
      border-radius: 8px;
      top: 80px;
      left: 100px;
      overflow: hidden;
      --rotation: -5deg;
    }
    .map-image {
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
      position: relative;
    }
    .map-pin {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #ff4d4d;
      border-radius: 50%;
      top: 40%;
      left: 60%;
      transform: translate(-50%, -50%);
    }
    .map-route {
      position: absolute;
      width: 60%;
      height: 3px;
      background-color: #ff4d4d;
      top: 50%;
      left: 20%;
      transform: rotate(30deg);
    }
    .popup-notification {
      width: 300px;
      height: 120px;
      background-color: #fff;
      border-radius: 8px;
      top: 30px;
      right: 150px;
      padding: 15px;
      --rotation: 3deg;
    }
    .notification-header {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin-bottom: 10px;
    }
    .notification-content {
      color: #666;
      font-size: 14px;
    }
    .popup-social {
      width: 250px;
      height: 160px;
      background-color: #fff;
      border-radius: 8px;
      bottom: 120px;
      left: 160px;
      overflow: hidden;
      --rotation: 7deg;
    }
    .social-header {
      background-color: #f1f1f1;
      padding: 10px;
      color: #333;
      font-weight: 600;
    }
    .social-content {
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      height: calc(100% - 36px);
      text-align: center;
    }
    .popup-rustic {
      width: 220px;
      height: 280px;
      background-color: #fff;
      border-radius: 8px;
      top: 60px;
      left: 220px;
      overflow: hidden;
      --rotation: -3deg;
    }
    .rustic-header {
      background-color: #e8bcba;
      color: #fff;
      padding: 10px;
      text-align: center;
      font-weight: 600;
    }
    .rustic-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: repeat(3, 1fr);
      gap: 5px;
      padding: 5px;
      height: calc(100% - 36px);
    }
    .rustic-item {
      background-color: #f0f0f0;
      border-radius: 4px;
    }
    .rustic-item.large {
      grid-column: span 1;
      grid-row: span 2;
    }
    .popup-video {
      width: 300px;
      height: 200px;
      background-color: #000;
      border-radius: 8px;
      bottom: 80px;
      right: 300px;
      overflow: hidden;
      --rotation: -2deg;
    }
    .video-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      padding: 0 10px;
    }
    .video-progress {
      flex: 1;
      height: 4px;
      background-color: #555;
      border-radius: 2px;
      margin: 0 10px;
      position: relative;
    }
    .video-progress-filled {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      background-color: #f00;
      width: 60%;
      border-radius: 2px;
    }
    .popup-email {
      width: 320px;
      height: 180px;
      background-color: #fff;
      border-radius: 8px;
      top: 250px;
      right: 250px;
      overflow: hidden;
      --rotation: 4deg;
    }
    .email-header {
      background-color: #f44336;
      height: 12px;
    }
    .email-content {
      padding: 15px;
      color: #333;
    }
    .email-subject {
      font-weight: 600;
      margin-bottom: 10px;
    }
    .email-body {
      font-size: 13px;
      line-height: 1.5;
      color: #555;
    }
    .popup-newsletter {
      width: 280px;
      height: 150px;
      background-color: #5c6bc0;
      border-radius: 8px;
      top: 180px;
      left: 350px;
      padding: 15px;
      color: #fff;
      --rotation: -5deg;
    }
    .newsletter-title {
      font-weight: 600;
      margin-bottom: 15px;
    }
    .newsletter-input {
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 4px;
      padding: 10px;
      width: 100%;
      margin-bottom: 10px;
      color: #fff;
    }
    .newsletter-button {
      background-color: #fff;
      color: #5c6bc0;
      border: none;
      border-radius: 4px;
      padding: 8px 12px;
      font-weight: 600;
      cursor: pointer;
    }
    .popup-calendar {
      width: 240px;
      height: 200px;
      background-color: #fff;
      border-radius: 8px;
      bottom: 200px;
      right: 180px;
      overflow: hidden;
      --rotation: 2deg;
    }
    .calendar-header {
      background-color: #4285f4;
      color: #fff;
      padding: 10px;
      font-weight: 600;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      padding: 10px;
    }
    .calendar-day {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 24px;
      color: #333;
      font-size: 12px;
    }
    .calendar-event {
      background-color: #f2f2f2;
      margin: 0 10px;
      padding: 5px;
      border-left: 3px solid #4285f4;
      color: #333;
      font-size: 12px;
    }
    .popup-game {
      width: 280px;
      height: 200px;
      background-color: #fff;
      border-radius: 8px;
      bottom: 220px;
      right: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      --rotation: 5deg;
      overflow: hidden;
    }
    .shell-game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      height: 100%;
      padding: 10px;
    }
    .shell-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .shell {
      width: 50px;
      height: 50px;
      background-color: #ddd;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      color: #333;
    }
    .shell-game-message {
      margin-top: 10px;
      font-size: 14px;
      color: #333;
      text-align: center;
      min-height: 24px;
    }
    .modern-website {
      position: absolute;
      width: 100%;
      min-height: 200vh;
      background-color: #1266f1;
      top: 600vh;
      left: 0;
      padding: 80px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .website-content {
      max-width: 800px;
      margin: 0 auto;
    }
    .hero-title {
      font-size: 38px;
      font-weight: 700;
      margin-bottom: 30px;
      text-align: center;
    }
    .hero-text {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 40px;
      max-width: 600px;
    }
    .section {
      margin-bottom: 80px;
    }
    .section-title {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 20px;
    }
    .section-text {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }
    .feature-card {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      transition: transform 0.3s ease;
    }
    .feature-card:hover {
      transform: translateY(-5px);
    }
    .feature-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .feature-description {
      font-size: 14px;
      line-height: 1.5;
    }
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background-color: transparent;
      z-index: 1000;
    }
    .progress-bar {
      height: 4px;
      background-color: #fff;
      width: 0%;
      transition: width 0.2s ease-out;
    }
    .browser-extension-icon {
      width: 24px;
      height: 24px;
      background-color: #444;
      border-radius: 4px;
      margin-left: 8px;
    }
    .tab-counter {
      position: absolute;
      top: 10px;
      right: 80px;
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 12px;
      padding: 4px 8px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .distraction-counter {
      position: absolute;
      top: 10px;
      right: 180px;
      background-color: rgba(255, 59, 48, 0.9);
      border-radius: 12px;
      padding: 4px 8px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .fake-desktop {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #2c2c30;
      z-index: 9;
      display: flex;
      flex-direction: column;
      opacity: 0;
    }
    .desktop-icons {
      display: grid;
      grid-template-columns: repeat(auto-fill, 80px);
      grid-template-rows: repeat(auto-fill, 80px);
      gap: 20px;
      padding: 20px;
    }
    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .icon-image {
      width: 48px;
      height: 48px;
      background-color: #555;
      border-radius: 8px;
      margin-bottom: 8px;
    }
    .icon-text {
      font-size: 12px;
      color: #fff;
    }
    .taskbar {
      height: 44px;
      background-color: #1a1a1a;
      margin-top: auto;
      display: flex;
      align-items: center;
      padding: 0 20px;
    }
    .taskbar-icon {
      width: 32px;
      height: 32px;
      background-color: #555;
      border-radius: 8px;
      margin-right: 12px;
    }
    .clock {
      margin-left: auto;
      color: #fff;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="fake-desktop" id="desktop">
    <div class="desktop-icons">
      <div class="desktop-icon">
        <div class="icon-image"></div>
        <div class="icon-text">Model City</div>
      </div>
      <div class="desktop-icon">
        <div class="icon-image"></div>
        <div class="icon-text">Sea Shells</div>
      </div>
      <div class="desktop-icon">
        <div class="icon-image"></div>
        <div class="icon-text">Letters</div>
      </div>
      <div class="desktop-icon">
        <div class="icon-image"></div>
        <div class="icon-text">Braille Book</div>
      </div>
      <div class="desktop-icon">
        <div class="icon-image"></div>
        <div class="icon-text">Memories</div>
      </div>
    </div>
    <div class="taskbar">
      <div class="taskbar-icon"></div>
      <div class="taskbar-icon"></div>
      <div class="taskbar-icon"></div>
      <div class="taskbar-icon"></div>
      <div class="clock">11:42 AM</div>
    </div>
  </div>
  <div class="browser-container" id="browserContainer">
    <div class="browser-header">
      <div class="browser-controls">
        <div class="browser-button red"></div>
        <div class="browser-button yellow"></div>
        <div class="browser-button green"></div>
      </div>
      <div class="browser-tabs" id="browserTabs">
        <div class="browser-tab active">Marie-Laure</div>
        <div class="browser-tab">Werner</div>
        <div class="browser-tab">Saint-Malo</div>
        <div class="browser-tab">Radio</div>
        <div class="browser-tab">The Miniature</div>
        <div class="browser-tab">Sea of Flames</div>
      </div>
      <div class="browser-navigation">
        <div class="nav-button">←</div>
        <div class="nav-button">→</div>
        <div class="nav-button">↻</div>
      </div>
      <div class="browser-address-bar">
        <span class="address-text" id="addressText"></span>
      </div>
      <div class="browser-extension-icon"></div>
      <div class="browser-extension-icon"></div>
      <div class="browser-extension-icon"></div>
    </div>
    <div class="browser-content">
      <div class="loading-bar" id="loadingBar"></div>
      <div class="initial-message" id="initialMessage" data-full="Welcome to Marie-Laure’s world. Darkness, light, and hidden truths."></div>
      <div class="tab-counter" id="tabCounter">23 Tabs Open</div>
      <div class="distraction-counter" id="distractionCounter">142 Distractions Blocked</div>
      <div class="popup-layer" id="popupLayer">
        <div class="popup popup-cookie" id="popupCookie">
          <div class="popup-cookie-text">This diamond, the Sea of Flames, is rumored to protect or curse. Will you keep it?</div>
          <button class="popup-cookie-button">I Will Protect It</button>
        </div>
        <div class="popup popup-chat" id="popupChat">
          <div class="chat-header"></div>
          <div class="chat-body">
            <div class="chat-bubble">"Open your eyes and see what you can with them before they close forever."</div>
          </div>
          <div class="chat-input">Etienne’s Broadcast</div>
        </div>
        <div class="popup popup-map" id="popupMap">
          <div class="map-image">
            <div class="map-pin"></div>
            <div class="map-route"></div>
          </div>
        </div>
        <div class="popup popup-notification" id="popupNotification">
          <div class="notification-header">Warning</div>
          <div class="notification-content">
            The Germans are closing in on Saint-Malo. They suspect you hold the Sea of Flames.
          </div>
        </div>
        <div class="popup popup-social" id="popupSocial">
          <div class="social-header">Letter from Daniel LeBlanc</div>
          <div class="social-content">
            "Remember the snails, Marie. They carry their homes wherever they go."
          </div>
        </div>
        <div class="popup popup-rustic" id="popupRustic">
          <div class="rustic-header">Marie-Laure's Shells</div>
          <div class="rustic-grid">
            <div class="rustic-item"></div>
            <div class="rustic-item"></div>
            <div class="rustic-item large"></div>
            <div class="rustic-item"></div>
            <div class="rustic-item"></div>
          </div>
        </div>
        <div class="popup popup-video" id="popupVideo">
          <div class="video-controls">
            <div>▶</div>
            <div class="video-progress">
              <div class="video-progress-filled"></div>
            </div>
            <div>🔊</div>
          </div>
        </div>
        <div class="popup popup-email" id="popupEmail">
          <div class="email-header"></div>
          <div class="email-content">
            <div class="email-subject">Urgent From The Museum</div>
            <div class="email-body">
              The Sea of Flames must not fall into the wrong hands. Protect it until the city is free.
            </div>
          </div>
        </div>
        <div class="popup popup-newsletter" id="popupNewsletter">
          <div class="newsletter-title">Join Our Secret Broadcast</div>
          <input type="text" class="newsletter-input" placeholder="Your safe frequency" />
          <button class="newsletter-button">Tune In</button>
        </div>
        <div class="popup popup-calendar" id="popupCalendar">
          <div class="calendar-header">August 1944</div>
          <div class="calendar-grid">
            <div class="calendar-day">Su</div>
            <div class="calendar-day">Mo</div>
            <div class="calendar-day">Tu</div>
            <div class="calendar-day">We</div>
            <div class="calendar-day">Th</div>
            <div class="calendar-day">Fr</div>
            <div class="calendar-day">Sa</div>
            <div class="calendar-day"></div>
            <div class="calendar-day"></div>
            <div class="calendar-day">1</div>
            <div class="calendar-day">2</div>
            <div class="calendar-day">3</div>
            <div class="calendar-day">4</div>
            <div class="calendar-day">5</div>
          </div>
          <div class="calendar-event">Bombardment Approaches</div>
        </div>
        <div class="popup popup-game" id="popupGame">
          <div class="shell-game-container">
            <div class="shell-row">
              <div class="shell" data-shell="1">1</div>
              <div class="shell" data-shell="2">2</div>
              <div class="shell" data-shell="3">3</div>
            </div>
            <div class="shell-game-message" id="shellGameMessage"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modern-website">
    <div class="website-content">
      <div class="section">
        <h1 class="hero-title">All the Light We Cannot See: Culminating Project</h1>
        <p class="hero-text">
          This digital creation captures Marie-Laure’s journey through the darkness of war. It reflects her resilience, the fragility of her world, and the precious diamond she holds. Each popup represents the illusions, dangers, and small wonders that surround her.
        </p>
        <p class="hero-text">
          By merging interactive elements with key motifs—like the Sea of Flames, the miniature city of Saint-Malo, and radio broadcasts—we explore the novel’s central idea: in times of darkness, a single spark of hope can guide us.
        </p>
      </div>
      <div class="section">
        <h2 class="section-title">Project Rationale</h2>
        <p class="section-text">
          This piece is designed to immerse the viewer in Marie-Laure’s experience, blending the novel’s themes of light, blindness, and hidden truths into an interactive web format. The popups mirror the obstacles and revelations she encounters, and the final transformations echo how war reshapes her world.
        </p>
        <p class="section-text">
          Incorporating the digital medium lets us layer multiple perspectives—echoing Werner’s radio signals—while maintaining a focus on Marie-Laure’s viewpoint. This aligns with the novel’s interplay between technology, fate, and personal courage.
        </p>
      </div>
      <div class="section">
        <h2 class="section-title">Connection to the Novel</h2>
        <p class="section-text">
          The Sea of Flames, references to braille, and the carefully modeled city of Saint-Malo are all central to Marie-Laure’s survival. This browser-based narrative aims to convey the tension she feels as she guards the diamond and navigates the bombed streets, guided by memory and sound.
        </p>
        <div class="feature-grid">
          <div class="feature-card">
            <h3 class="feature-title">Knowledge</h3>
            <p class="feature-description">
              Demonstrates an understanding of the novel’s major symbols (the diamond, shells, the model city) and events (the siege of Saint-Malo).
            </p>
          </div>
          <div class="feature-card">
            <h3 class="feature-title">Thinking</h3>
            <p class="feature-description">
              Each interactive element is a metaphor for Marie-Laure’s inner world, connecting her decisions to the larger themes of war, loss, and hope.
            </p>
          </div>
          <div class="feature-card">
            <h3 class="feature-title">Communication</h3>
            <p class="feature-description">
              Through concise text and visual popups, the project conveys emotional stakes and narrative tension without overwhelming the user.
            </p>
          </div>
        </div>
      </div>
      <div class="section">
        <h2 class="section-title">Application</h2>
        <p class="section-text">
          By weaving story elements into modern web design, this project shows how literature can be reimagined in a digital space. The final shift—where clutter and conflict fade—mirrors a yearning for peace after the war’s chaos.
        </p>
        <p class="section-text">
          Marie-Laure’s journey, represented here, emphasizes the power of perseverance, the value of hidden knowledge, and the light that can shine even in the darkest times.
        </p>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded",function(){
      const bc=document.getElementById("browserContainer");
      const pl=document.getElementById("popupLayer");
      const im=document.getElementById("initialMessage");
      const lb=document.getElementById("loadingBar");
      const bt=document.getElementById("browserTabs");
      const at=document.getElementById("addressText");
      const tc=document.getElementById("tabCounter");
      const dc=document.getElementById("distractionCounter");
      const ds=document.getElementById("desktop");
      const pb=document.getElementById("progressBar");
      let hasTyped=false;
      let gameActive=false;
      let diamondShell=1;
      function shuffleDiamond(){
        diamondShell=Math.floor(Math.random()*3)+1;
      }
      function setupGame(){
        shuffleDiamond();
        document.querySelectorAll(".shell").forEach(function(s){
          s.addEventListener("click",function(){
            if(!gameActive)return;
            const chosen=+this.getAttribute("data-shell");
            if(chosen===diamondShell){
              document.getElementById("shellGameMessage").textContent="You found the diamond!";
            }else{
              document.getElementById("shellGameMessage").textContent="Not here. Try again.";
            }
          });
        });
      }
      setupGame();
      function typeText(el,text,delay){
        let i=0;
        function type(){
          if(i<text.length){
            el.textContent+=text.charAt(i);
            i++;
            setTimeout(type,delay);
          }else{
            hasTyped=true;
          }
        }
        type();
      }
      const popups=Array.from(document.querySelectorAll(".popup")).map(function(p,i){
        const style=getComputedStyle(p);
        const rotation=parseFloat(style.getPropertyValue("--rotation"))||0;
        return{
          el:p,
          base:rotation,
          rand:Math.random()*2-1,
          scale:0.8+Math.random()*0.4,
          offset:i*3,
          spring:0.05+Math.random()*0.05,
          angle:(i/document.querySelectorAll(".popup").length)*360
       };
      });
      let ticking=false,easedScroll=0,targetScroll=0;
      const stages={
        initial:0,
        showDesktop:5,
        hideDesktop:12,
        showAddressBar:15,
        showTabs:18,
        loadPage:22,
        showPopups:28,
        popupsAppear:32,
        clutterPhase:45,
        clearClutter:70,
        shrinkBrowser:82,
        showModernSite:90
      };
      const tabs=Array.from(bt.querySelectorAll(".browser-tab")).map(function(tab,i){
        return{el:tab,delay:i*2};
      });
      function easeInOutQuad(t){
        return t<0.5?2*t*t:1-Math.pow(-2*t+2,2)/2;
      }
      function easeOutElastic(t){
        const c4=(2*Math.PI)/3;
        return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-0.75)*c4)+1;
      }
      function lerp(a,b,f){
        return a+(b-a)*f;
      }
      function update(){
        easedScroll=lerp(easedScroll,targetScroll,0.1);
        pb.style.width=Math.min(100,easedScroll*1.03)+"%";
        let dir=targetScroll>easedScroll?1:-1;
        if(easedScroll<stages.shrinkBrowser){
          const norm=Math.max(0,Math.min(1,easedScroll/stages.shrinkBrowser));
          const py=10*Math.sin(norm*Math.PI)*dir;
          bc.style.transform="translateY("+py+"px)";
          bc.style.opacity="1";
        }else{
          const prog=(easedScroll-stages.shrinkBrowser)/(stages.showModernSite-stages.shrinkBrowser);
          const eProg=easeInOutQuad(prog);
          const bounce=Math.max(0,0.05*Math.sin(prog*Math.PI*3));
          const scale=Math.max(0.3,1-(eProg*0.7+bounce));
          const rot=eProg*-5;
          const yOff=eProg*-120;
          const xOff=eProg*20*Math.sin(eProg*Math.PI);
          bc.style.transform="scale("+scale+") translateY("+yOff+"vh) translateX("+xOff+"vw) rotate("+rot+"deg)";
          bc.style.opacity=1-eProg;
        }
        if(easedScroll>=stages.showDesktop&&easedScroll<stages.hideDesktop){
          const dp=(easedScroll-stages.showDesktop)/(stages.hideDesktop-stages.showDesktop);
          const eDp=easeInOutQuad(dp);
          ds.style.opacity=eDp.toFixed(3);
        }else{
          ds.style.opacity="0";
        }
        if(easedScroll>=stages.showAddressBar){
          const ap=Math.min(1,(easedScroll-stages.showAddressBar)/5);
          at.style.opacity="1";
          if(ap<1){
            const full="https://marie-laure.fr/";
            const len=Math.floor(full.length*ap);
            at.textContent=full.substring(0,len);
          }else{
            at.textContent="https://marie-laure.fr/";
          }
        }else{
          at.style.opacity="0";
        }
        tabs.forEach(function(t){
          if(easedScroll>=stages.showTabs+t.delay){
            const tp=Math.min(1,(easedScroll-(stages.showTabs+t.delay))/3);
            t.el.style.opacity=easeOutElastic(tp);
            const sEff=0.9+0.1*easeOutElastic(tp);
            t.el.style.transform="scale("+sEff+")";
          }else{
            t.el.style.opacity="0";
          }
        });
        bt.style.height=easedScroll>=stages.showTabs?"32px":"0";
        if(easedScroll>=stages.loadPage&&easedScroll<stages.showPopups){
          const lp=(easedScroll-stages.loadPage)/(stages.showPopups-stages.loadPage);
          const elp=easeInOutQuad(lp);
          const pulse=Math.sin(lp*Math.PI*8)*0.03;
          const adj=Math.min(1,elp+pulse);
          lb.style.width=adj*100+"%";
          lb.style.opacity="1";
          if(!hasTyped&&easedScroll>=stages.loadPage){
            im.textContent="";
            typeText(im,im.dataset.full,50);
          }else{
            const msgOp=1-Math.max(0,(lp-0.3)/0.7);
            im.style.opacity=msgOp.toFixed(2);
          }
        }else if(easedScroll>=stages.showPopups){
          lb.style.opacity="0";
          im.style.opacity="0";
        }else{
          lb.style.width="0";
          lb.style.opacity="0";
          im.style.opacity="1";
        }
        if(easedScroll>=stages.popupsAppear&&easedScroll<stages.clearClutter){
          const ppProg=Math.min(1,(easedScroll-stages.popupsAppear)/10);
          pl.style.opacity=ppProg.toFixed(2);
          popups.forEach(function(p){
            const threshold=stages.popupsAppear+p.offset;
            const nextT=threshold+8;
            if(easedScroll>=threshold){
              const ip=Math.min(1,(easedScroll-threshold)/(nextT-threshold));
              const eIp=easeOutElastic(ip);
              p.el.style.opacity=ip.toFixed(2);
              const sc=p.scale+0.2*eIp;
              const extra=p.rand*20*(1-eIp);
              const ty=(1-eIp)*50;
              const tx=p.rand*10*(1-eIp);
              p.el.style.transform="rotate("+(p.base+extra)+"deg) scale("+sc+") translate("+tx+"px,"+ty+"px)";
              p.el.onmousemove=function(e){
                const b=this.getBoundingClientRect();
                const x=e.clientX-b.left-b.width/2;
                const y=e.clientY-b.top-b.height/2;
                const tiltX=(y/b.height)*5;
                const tiltY=(-x/b.width)*5;
                this.style.transform="rotate("+(p.base+extra)+"deg) scale("+sc+") translate("+tx+"px,"+ty+"px) rotateX("+tiltX+"deg) rotateY("+tiltY+"deg)";
              };
              p.el.onmouseleave=function(){
                this.style.transform="rotate("+(p.base+extra)+"deg) scale("+sc+") translate("+tx+"px,"+ty+"px)";
              };
            }else{
              p.el.style.opacity="0";
            }
          });
          if(easedScroll>=stages.clutterPhase-10){
            const cp=(easedScroll-(stages.clutterPhase-10))/10;
            const ecp=easeInOutQuad(cp);
            const tabsCount=Math.floor(12+(36-12)*ecp);
            const discCount=Math.floor(85+(247-85)*ecp);
            tc.textContent=tabsCount+" Tabs Open";
            dc.textContent=discCount+" Distractions Blocked";
            const shake=ecp*2;
            const rx=(Math.random()*2-1)*shake;
            const ry=(Math.random()*2-1)*shake;
            if(ecp>0.8){
              bc.style.transform+=" translate("+rx+"px,"+ry+"px)";
            }
            tc.style.opacity=ecp.toFixed(2);
            dc.style.opacity=ecp.toFixed(2);
          }else{
            tc.style.opacity="0";
            dc.style.opacity="0";
          }
        }else if(easedScroll>=stages.clearClutter){
          const clr=(easedScroll-stages.clearClutter)/(stages.shrinkBrowser-stages.clearClutter);
          const eClr=easeInOutQuad(clr);
          pl.style.opacity=(1-eClr).toFixed(2);
          tc.style.opacity=(1-eClr).toFixed(2);
          dc.style.opacity=(1-eClr).toFixed(2);
          popups.forEach(function(p){
            const delay=p.rand*0.1;
            const adj=Math.min(1,(clr-delay)/0.9);
            if(adj>0){
              const rad=p.angle*(Math.PI/180);
              const dist=adj*adj*500;
              const x=Math.cos(rad)*dist;
              const y=Math.sin(rad)*dist;
              const spin=adj*360*(p.rand>0?1:-1);
              p.el.style.transform="rotate("+(p.base+spin)+"deg) scale("+(1-adj*0.5)+") translate("+x+"px,"+y+"px)";
              p.el.style.opacity=(1-adj).toFixed(2);
            }
          });
          if(clr>0.8&&clr<0.9){
            const pulseAmt=Math.sin((clr-0.8)*Math.PI*10)*0.03;
            bc.style.transform+=" scale("+(1+pulseAmt)+")";
          }
        }else{
          pl.style.opacity="0";
          tc.style.opacity="0";
          dc.style.opacity="0";
          popups.forEach(function(p){
            p.el.style.opacity="0";
          });
        }
        if(easedScroll>=stages.popupsAppear){
          gameActive=true;
        }else{
          gameActive=false;
          document.getElementById("shellGameMessage").textContent="";
          shuffleDiamond();
        }
        if(easedScroll>99)pb.style.width="100%";
        if(Math.abs(easedScroll-targetScroll)<0.001)ticking=false;else requestAnimationFrame(update);
      }
      function onScroll(){
        const sh=document.body.scrollHeight-window.innerHeight;
        const sp=window.scrollY;
        targetScroll=(sp/sh)*100;
        if(!ticking){
          requestAnimationFrame(update);
          ticking=true;
        }
      }
      window.addEventListener("scroll",onScroll,{passive:true});
      window.addEventListener("resize",update,{passive:true});
      setTimeout(function(){
        onScroll();
        update();
      },100);
      document.querySelectorAll(".browser-button").forEach(function(b){
        b.addEventListener("mouseenter",function(){
          b.style.filter="brightness(1.2)";
        });
        b.addEventListener("mouseleave",function(){
          b.style.filter="";
        });
      });
      document.querySelectorAll(".nav-button").forEach(function(b){
        b.addEventListener("mouseenter",function(){
          b.style.opacity="1";
        });
        b.addEventListener("mouseleave",function(){
          b.style.opacity="0.6";
        });
        b.addEventListener("mousedown",function(){
          b.style.transform="scale(0.9)";
        });
        b.addEventListener("mouseup",function(){
          b.style.transform="";
        });
      });
    });
  </script>
</body>
</html>
